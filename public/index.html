<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>ArtsyHub</title>
    <script src = "https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script type ="text/javascript">
    (function($){
      $(document).ready(function(){

        $('button').click(function(){
          $('ul').empty();
          $('h4').empty();
          $('input').empty();
          let shops = [];
          const tag = $("[id='tag']").val();
          //Request to server
          $.ajax({
            url: '/listingids?artistName=' + tag,
            dataType: 'json',
            success: function(data) {
              if(data.length == 0)
                $('ul').append('Sorry, we were unable to find any sellers related to that artist!');
              for(let item of data){
                if(!shops.includes(item)){
                  $('ul').append('<li>https://www.etsy.com/shop/'+item+'</li>');
                  shops.push(item);
                }
              }
          }
        });
      })
    });
    })(jQuery);
  </script>
  </head>
  <body onload>
    <h1>ArtsyHub</h1>
    <h3>Type in your favorite artist to get a list of sellers on Etsy to buy their merch from!</h2>
    <div class = "container">
      <input id = "tag"></input>
      <button id="button">Enter your favorite artist</button>
      <div class = "inner">
        <ul></ul>
      </div>
    </div>
  </body>
</html>
